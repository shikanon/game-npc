# game-npc
一个基于大模型实现的 game npc 框架，利用 function call 和知识库满足长记忆和智能战斗、好感管理。


## 组件

### 记忆
记忆分为长记忆和短记忆。
短记忆有两种，一种是对话的上下文（Dialogue Context），直接kv的形式放在内存中，另一种是会话内容（Conversation Content），最近的对话内容对最近的 k 轮对话内容通过 LLM 总结后输出的结果。短记忆的优先级采用时间倒序。
长记忆分为话题事件（Topic Event）和关键事件（Key Event）。话题事件是对会话内容进行总结，利用LLM将会话内容总结成主谓宾格式的事件，话题事件在采集的时候会更加其重要程度排序，重要度也是由LLM进行打分。关键事件和角色NPC的背景设计一样，会在每次会话都带上，关键事件不是必须有的，只有对角色有重大影响的行为才会触发。

### 好感系统
通过function call实现的好感系统。
